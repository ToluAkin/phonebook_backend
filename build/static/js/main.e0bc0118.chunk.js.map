{"version":3,"sources":["services/persons.js","components/Person.js","components/PersonForm.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","queries","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","Person","props","names","persons","map","person","index","name","number","data-id","onClick","handleDelete","PersonForm","onSubmit","handleSubmit","value","copyNewName","onChange","handleNameChange","copyNewNumber","handleNumberChange","type","Filter","copyFindName","handleFindNameChange","Notification","displayedMessage","message","className","includes","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","findName","setFindName","errorMessage","setErrorMessage","copyPersons","useEffect","personService","e","target","displayedName","filter","toLowerCase","preventDefault","checkData","newPerson","length","personId","window","confirm","thisPerson","catch","error","console","log","setTimeout","concat","getAttribute","toRemove","find","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e0bc0118.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'https://fullstackopen-phone-book-api.herokuapp.com/api/persons'\n// const baseUrl = 'http://localhost:3001/api/persons'\n\n// get all persons\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\n// save data of a person\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\n// update the data of a person\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\n// delete the data of a person\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst queries = {\n    getAll,\n    create,\n    update,\n    remove\n}\n\nexport default queries","import React from 'react'\n\nconst Person = props => {\n    let names = props.persons.map((person, index) =>\n        <li key={index}>{person.name} {person.number} <button data-id={ person.id } onClick={props.handleDelete}>delete</button></li>\n    )\n    return (\n        <ul>\n            { names }\n        </ul>\n        \n    )\n}\n\nexport default Person","import React from 'react'\n\nconst PersonForm = props => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <div>\n                name: <input value={props.copyNewName} onChange={props.handleNameChange} />\n            </div>\n            <div>\n                number: <input value={props.copyNewNumber} onChange={props.handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = props => {\n    return (\n        <div>\n            filter shown with\n            <input value={props.copyFindName} onChange={props.handleFindNameChange} />\n        </div>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) return null\n    let displayedMessage;\n    if (message) displayedMessage = <p className={message.includes('Added') ? 'success' : 'error'}>{message}</p>\n    \n    return (\n        <div>{displayedMessage}</div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Person from './components/Person'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\n\nconst App = () => {\n    const [ persons, setPersons ] = useState([]) \n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber ] = useState('')\n    const [ findName, setFindName ] = useState('')\n    const [ errorMessage, setErrorMessage ] = useState('')\n    \n    let copyNewName = newName\n    let copyPersons = persons\n    let copyNewNumber = newNumber\n    let copyFindName = findName\n\n    // useEffect to get all the persons\n    useEffect(() => {\n        personService.getAll()\n            .then(response => {\n            setPersons(response)\n        })\n    }, [])\n\n    /**\n     * handleSubmit validates data when submission is done\n     * @param {event} e \n     */\n    const handleSubmit = e => {\n        e.preventDefault()\n\n        let checkData = copyPersons.filter(person => {\n            // eslint-disable-next-line\n            return person.name == copyNewName;\n        })\n        let newPerson = { name: copyNewName, number: copyNewNumber }\n        \n        if (!checkData.length) {\n            personService.create(newPerson)\n                .then(response => {\n                    setPersons(copyPersons.concat(response))\n                    setErrorMessage(`Added ${copyNewName}`)\n                    setNewName('')\n                    setNewNumber('')\n                })\n                .catch(error => {\n                    setErrorMessage(`${error.response.data.error}`)\n                })\n            setTimeout(() => { setErrorMessage(null) }, 5000);\n        } else {\n            const personId = checkData[0].id\n            const updateAction = window.confirm(`${copyNewName} is already in the phone book, replace the old number with a new one`)\n            if (updateAction) {\n                personService.create(newPerson)\n                    .then(response => {\n                        setPersons(copyPersons.map(thisPerson => thisPerson.id !== personId ? thisPerson : response))\n                    })\n                    .catch(error => {\n                        console.log(error);\n                        setErrorMessage(`Information of ${copyNewName} has already been removed from the server`)\n                        setTimeout(() => {\n                            setErrorMessage(null)\n                        }, 5000);\n                        setPersons(copyPersons.filter(person => person.id !== personId))\n                    })\n                setNewName('')\n                setNewNumber('')\n            }\n        }\n    }\n\n    /**\n     * Handle Delete removes a person's data\n     * @param {event} e \n     */\n    const handleDelete = e => {\n        const id = e.target.getAttribute('data-id')\n        // eslint-disable-next-line eqeqeq\n        const toRemove = copyPersons.find(thisPerson => thisPerson.id == id)\n        // eslint-disable-next-line eqeqeq\n        const newPersons = copyPersons.filter(person => person.id != id)\n\n        const deleteAction = window.confirm(`Delete ${toRemove.name} ?`)\n        if (deleteAction) {\n            personService.remove(id)\n            .then(response => {\n                setPersons(newPersons)\n            })\n        }\n    }\n    \n    /**\n     * handleNameChange sets the value of the input field to the name\n     * @param {event} e \n     */\n    const handleNameChange = e => {\n        setNewName(e.target.value)\n    }\n\n    /**\n     * handleNumberChange sets the value of the number field to the name\n     * @param {event} e \n     */\n    const handleNumberChange = e => {\n        setNewNumber(e.target.value)\n    }\n\n    /**\n     * Search handles the filtering of names to be displayed\n     * @param {event} e \n     */\n    const handleFindNameChange = e => {\n        setFindName(e.target.value)\n        let displayedName = persons.filter(person => person.name.toLowerCase().includes(copyFindName.toLowerCase()))\n        setPersons(displayedName)\n    }\n\n    return (\n        <div>\n            <Filter\n                copyFindName={copyFindName}\n                handleFindNameChange={handleFindNameChange}\n            />\n\n            <h2>Phone book</h2>\n            <Notification message={errorMessage} />\n            <PersonForm\n                copyNewName={copyNewName}\n                copyNewNumber={copyNewNumber}\n                handleSubmit={handleSubmit}\n                handleNameChange={handleNameChange}\n                handleNumberChange={handleNumberChange}\n            />\n            \n            <h2>Numbers</h2>\n            <Person persons={copyPersons} handleDelete={handleDelete} />\n        </div>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);\n\n"],"sourceRoot":""}